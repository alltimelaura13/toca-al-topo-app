{"ast":null,"code":"import { BehaviorSubject, concatMap, map, tap, timer } from 'rxjs';\nfunction randomTime(min, max) {\n  return Math.round(Math.random() * (max - min) + min);\n}\nfunction randomHole(holes, lastHole) {\n  const idx = Math.floor(Math.random() * holes.length);\n  if (idx === lastHole) {\n    return randomHole(holes, lastHole);\n  }\n  return idx;\n}\nexport function salto(holes, minUpTime, maxUpTime) {\n  return function (source) {\n    return source.pipe(map(lastHole => ({\n      upTime: randomTime(minUpTime, maxUpTime),\n      holeIdx: randomHole(holes, lastHole)\n    })), concatMap(({\n      upTime,\n      holeIdx\n    }) => {\n      if (source instanceof BehaviorSubject) {\n        source.next(holeIdx);\n      }\n      const hole = holes[holeIdx].nativeElement;\n      hole.classList.add('up');\n      return timer(upTime).pipe(tap(() => hole.classList.remove('up')));\n    }));\n  };\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}